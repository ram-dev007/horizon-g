<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Celestial Voyager | Cosmic Video Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS Player for the video stream -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap');
        
        :root {
            --aura-color: rgba(64, 150, 255, 0.2);
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background-color: #02040a;
            margin: 0;
            overflow-x: hidden;
            color: white;
        }

        /* 1. The Video Layer (Bottom) */
        #video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -3;
            overflow: hidden;
        }

        #video-background video {
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            object-fit: cover;
            filter: brightness(0.6) contrast(1.1); /* Darken slightly to pop the stars */
        }

        /* 2. The Interactive Canvas Layer */
        #cosmos-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            pointer-events: none;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            display: block;
        }

        /* 3. Nebula/Atmosphere Overlay */
        .nebula {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
            filter: blur(80px);
            pointer-events: none;
            background: 
                radial-gradient(circle at 20% 30%, #3a0ca3 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, #7209b7 0%, transparent 40%);
        }

        /* 4. The Planet Aura / Cursor Follower */
        #planet-aura {
            position: fixed;
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--aura-color) 0%, transparent 70%);
            pointer-events: none;
            z-index: 10;
            transform: translate(-50%, -50%);
            mix-blend-mode: screen;
            box-shadow: 0 0 40px rgba(67, 97, 238, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(3px);
        }

        .pulse {
            animation: auraPulse 4s infinite ease-in-out;
        }

        @keyframes auraPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
        }

        .glass-panel {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
        }

        .nav-link {
            position: relative;
            transition: all 0.3s;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0%;
            height: 1px;
            background: #4cc9f0;
            transition: width 0.3s;
        }

        .nav-link:hover::after { width: 100%; }

        /* Animation utilities */
        .fade-in { animation: fadeIn 2s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <!-- Layer 1: HLS Video -->
    <div id="video-background">
        <video id="hls-video" muted playsinline></video>
    </div>

    <!-- Layer 2: Interactive Canvas Stars & Dust -->
    <div id="cosmos-container">
        <canvas id="star-canvas"></canvas>
        <canvas id="trail-canvas"></canvas>
    </div>

    <!-- Layer 3: Nebula effects -->
    <div class="nebula"></div>

    <!-- Layer 4: Cursor Aura -->
    <div id="planet-aura" class="pulse"></div>

    <!-- UI Content -->
    <div class="relative z-20 min-h-screen flex flex-col fade-in">
        <!-- Navigation -->
        <nav class="flex items-center justify-between px-10 py-8 max-w-7xl mx-auto w-full">
            <div class="text-3xl font-bold tracking-widest flex items-center gap-3">
                <div class="w-8 h-8 rounded-full border-2 border-blue-400 border-t-transparent animate-spin"></div>
                HORIZON
            </div>
            <div class="hidden lg:flex space-x-12 text-sm font-medium uppercase tracking-[0.2em] opacity-70">
                <a href="#" class="nav-link hover:opacity-100">Telemetry</a>
                <a href="#" class="nav-link hover:opacity-100">Navigation</a>
                <a href="#" class="nav-link hover:opacity-100">Contact</a>
            </div>
            <button id="audio-toggle" class="px-6 py-2 border border-white/20 text-[10px] font-bold uppercase tracking-widest rounded-full hover:bg-white hover:text-black transition-all">
                Sound: Off
            </button>
        </nav>

        <!-- Hero -->
        <main class="flex-grow flex items-center justify-center px-6 text-center">
            <div class="max-w-5xl">
                <h2 class="text-blue-400 font-bold tracking-[0.5em] uppercase text-xs mb-6 opacity-80">Universal Stream Initialized</h2>
                <h1 class="text-6xl md:text-9xl font-bold mb-8 tracking-tighter leading-none">
                    IMMERSIVE<br>
                    <span class="text-transparent bg-clip-text bg-gradient-to-b from-white via-blue-100 to-blue-400">REALITY</span>
                </h1>
                <p class="text-lg md:text-xl opacity-60 mb-12 max-w-2xl mx-auto font-light leading-relaxed">
                    Merging high-definition HLS streaming with dense stardust physics. Move your cursor to ignite the local galactic wake.
                </p>
                <div class="flex flex-col sm:flex-row items-center justify-center gap-6">
                    <button class="px-12 py-5 bg-blue-600 text-white rounded-full font-bold hover:bg-blue-500 transition-all shadow-lg shadow-blue-900/40">
                        Initiate Warp
                    </button>
                    <button class="px-12 py-5 glass-panel font-bold hover:bg-white/5 transition-all">
                        Star Charts
                    </button>
                </div>
            </div>
        </main>

        <!-- Footer Stats -->
        <div class="p-10">
            <div class="max-w-7xl mx-auto glass-panel p-8 grid grid-cols-2 md:grid-cols-4 gap-8 text-center md:text-left">
                <div>
                    <p class="text-[10px] uppercase tracking-widest opacity-40 mb-1">Signal Status</p>
                    <p class="text-xl font-bold text-emerald-400">Live Stream</p>
                </div>
                <div>
                    <p class="text-[10px] uppercase tracking-widest opacity-40 mb-1">Buffer Rate</p>
                    <p class="text-xl font-bold text-blue-400">0.2ms</p>
                </div>
                <div>
                    <p class="text-[10px] uppercase tracking-widest opacity-40 mb-1">Stardust Density</p>
                    <p class="text-xl font-bold text-blue-400">Enhanced</p>
                </div>
                <div>
                    <p class="text-[10px] uppercase tracking-widest opacity-40 mb-1">Coordinates</p>
                    <p id="coords" class="text-xl font-bold text-purple-400">00.00, 00.00</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const video = document.getElementById('hls-video');
        const videoSrc = 'https://customer-cbeadsgr09pnsezs.cloudflarestream.com/be64a67cba95d295d3dde88e803f79f2/manifest/video.m3u8';
        const starCanvas = document.getElementById('star-canvas');
        const trailCanvas = document.getElementById('trail-canvas');
        const starCtx = starCanvas.getContext('2d');
        const trailCtx = trailCanvas.getContext('2d');
        const aura = document.getElementById('planet-aura');
        const audioBtn = document.getElementById('audio-toggle');
        const coordsDisplay = document.getElementById('coords');

        let width, height;
        let stars = [];
        let particles = [];
        let mouse = { x: -200, y: -200 };
        let targetMouse = { x: -200, y: -200 };

        // 1. Initialize HLS Video
        function initVideo() {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(videoSrc);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = videoSrc;
                video.addEventListener('loadedmetadata', () => video.play());
            }
            video.loop = true;
        }

        // 2. Initialize Canvas Systems
        function initCanvas() {
            width = window.innerWidth;
            height = window.innerHeight;
            starCanvas.width = width;
            starCanvas.height = height;
            trailCanvas.width = width;
            trailCanvas.height = height;

            stars = [];
            // Increased fixed star count slightly for more detail
            for (let i = 0; i < 550; i++) {
                stars.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    size: Math.random() * 2,
                    opacity: Math.random(),
                    parallax: Math.random() * 0.05 + 0.01,
                    blink: Math.random() * 0.015
                });
            }
        }

        // Particle Class for the stardust trail - Modified for more density/life
        class Stardust {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                // Randomized sizes for more organic feel
                this.size = Math.random() * 4 + 0.5;
                // Faster expansion
                this.vx = (Math.random() - 0.5) * 2.5;
                this.vy = (Math.random() - 0.5) * 2.5;
                this.alpha = 1;
                // Cycle through a wider range of cosmic blues/purples
                const hue = 190 + Math.random() * 70;
                this.color = `hsla(${hue}, 100%, 80%, `;
                // Slower decay for longer trails
                this.decay = 0.008 + Math.random() * 0.01;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.alpha -= this.decay;
                // Shrink as it fades
                if (this.size > 0.1) this.size -= 0.02;
            }
            draw() {
                trailCtx.fillStyle = this.color + this.alpha + ')';
                trailCtx.shadowBlur = this.size * 2;
                trailCtx.shadowColor = this.color + '0.5)';
                trailCtx.beginPath();
                trailCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                trailCtx.fill();
                trailCtx.shadowBlur = 0; // Reset for performance
            }
        }

        function animate() {
            // Mouse smoothing
            mouse.x += (targetMouse.x - mouse.x) * 0.12;
            mouse.y += (targetMouse.y - mouse.y) * 0.12;

            aura.style.left = `${mouse.x}px`;
            aura.style.top = `${mouse.y}px`;
            coordsDisplay.innerText = `${Math.floor(mouse.x)}, ${Math.floor(mouse.y)}`;

            // Clear Canvases
            starCtx.clearRect(0, 0, width, height);
            trailCtx.clearRect(0, 0, width, height);

            // Draw Stars
            stars.forEach(star => {
                const ox = (mouse.x - width/2) * star.parallax;
                const oy = (mouse.y - height/2) * star.parallax;
                star.opacity += star.blink;
                if (star.opacity > 1 || star.opacity < 0.2) star.blink *= -1;

                starCtx.fillStyle = `rgba(255, 255, 255, ${star.opacity})`;
                starCtx.beginPath();
                starCtx.arc(star.x + ox, star.y + oy, star.size, 0, Math.PI * 2);
                starCtx.fill();
            });

            // Draw Trail - Multiplied particle emission
            if (mouse.x > 0 || mouse.y > 0) {
                // Emit 4 particles per frame instead of 1
                for(let i = 0; i < 4; i++) {
                    particles.push(new Stardust(mouse.x, mouse.y));
                }
            }
            
            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
                particles[i].draw();
                if (particles[i].alpha <= 0) {
                    particles.splice(i, 1);
                    i--;
                }
            }

            // Cap the total particles to prevent performance lag
            if (particles.length > 1200) {
                particles.splice(0, particles.length - 1200);
            }

            requestAnimationFrame(animate);
        }

        // Event Listeners
        window.addEventListener('mousemove', (e) => {
            targetMouse.x = e.clientX;
            targetMouse.y = e.clientY;
        });

        audioBtn.addEventListener('click', () => {
            video.muted = !video.muted;
            audioBtn.innerText = `Sound: ${video.muted ? 'Off' : 'On'}`;
        });

        window.addEventListener('resize', initCanvas);

        // Bootstrap
        initVideo();
        initCanvas();
        animate();
    </script>
</body>
</html>
